#!/usr/bin/env perl
use warnings;
use strict;
use v5.10.0;

use open IO => ":locale";

use JSON qw();
use Storable qw(dclone);
use URI::Escape qw(uri_escape_utf8);
use Data::Dumper qw(Dumper);
use FindBin;

use lib "$FindBin::Bin/../lib";
use My::Pandora::Data;

my $format = 'custom';

my $json = JSON->new();
$json->pretty(1);

my $unsafe = '^' . join('', map { quotemeta($_) }
                            grep { index('/\\"*:<>?|', $_) == -1 }
                            map { chr($_) }
                            (32 .. 126));

my $dataDir = "$ENV{HOME}/.pandora/data";

if (scalar @ARGV) {
    $dataDir = $ARGV[0];
}

my $d = My::Pandora::Data->new(
    dataDir => $dataDir,
    format => 'text',
);
$d->listData();
